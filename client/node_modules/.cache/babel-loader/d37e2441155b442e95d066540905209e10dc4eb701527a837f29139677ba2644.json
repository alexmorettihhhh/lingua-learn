{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import*as lessonService from'../services/lesson.service';import*as progressService from'../services/progress.service';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LessonLearn=()=>{const{id}=useParams();const navigate=useNavigate();const[lesson,setLesson]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[currentWordIndex,setCurrentWordIndex]=useState(0);const[showTranslation,setShowTranslation]=useState(false);const[progress,setProgress]=useState(0);const[completedWords,setCompletedWords]=useState([]);const[isCompleted,setIsCompleted]=useState(false);useEffect(()=>{if(!id)return;const fetchLesson=async()=>{try{setLoading(true);setError(null);const response=await lessonService.getLesson(id);if(response.success&&response.data){setLesson(response.data);// Fetch progress for this lesson\ntry{const progressResponse=await progressService.getLessonProgress(id);if(progressResponse.success&&progressResponse.data){setProgress(progressResponse.data.completionPercentage);setCompletedWords(progressResponse.data.completedWords||[]);// If all words are completed, set isCompleted to true\nif(progressResponse.data.completionPercentage===100){setIsCompleted(true);}}}catch(error){// If there's no progress yet, that's okay\nconsole.log('No progress data available');}}else{setError(response.message||'Не удалось загрузить урок');}}catch(error){setError(error.message||'Ошибка при загрузке урока');}finally{setLoading(false);}};fetchLesson();},[id]);const handleShowTranslation=()=>{setShowTranslation(true);};const handleKnowWord=async()=>{if(!lesson||!id||!Array.isArray(lesson.words))return;const currentWord=lesson.words[currentWordIndex];const wordId=typeof currentWord==='object'?currentWord._id:currentWord;if(!wordId)return;try{// Mark word as completed\nawait progressService.updateWordProgress(id,wordId);// Add to completed words\nif(!completedWords.includes(wordId)){const newCompletedWords=[...completedWords,wordId];setCompletedWords(newCompletedWords);// Calculate new progress\nconst newProgress=Math.round(newCompletedWords.length/lesson.words.length*100);setProgress(newProgress);// If all words are completed, set isCompleted to true\nif(newProgress===100){setIsCompleted(true);}}// Move to next word or complete lesson\nif(currentWordIndex<lesson.words.length-1){setCurrentWordIndex(currentWordIndex+1);setShowTranslation(false);}else{setIsCompleted(true);}}catch(error){console.error('Error updating word progress:',error);}};const handleDontKnowWord=()=>{// Just move to the next word without marking it as known\nif(!lesson||!Array.isArray(lesson.words))return;if(currentWordIndex<lesson.words.length-1){setCurrentWordIndex(currentWordIndex+1);setShowTranslation(false);}else{setIsCompleted(true);}};const handleRestartLesson=()=>{setCurrentWordIndex(0);setShowTranslation(false);setIsCompleted(false);};const handleFinishLesson=()=>{navigate(`/lessons/${id}`);};// Helper function to check if a word is an IWord object\nconst isWordObject=word=>{return typeof word==='object'&&word!==null&&'_id'in word;};const getCurrentWord=()=>{if(!lesson||!Array.isArray(lesson.words)||lesson.words.length===0){return null;}const currentWord=lesson.words[currentWordIndex];if(isWordObject(currentWord)){return currentWord;}return null;};const renderProgressBar=()=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-amoled-text-secondary\",children:\"\\u041F\\u0440\\u043E\\u0433\\u0440\\u0435\\u0441\\u0441\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-amoled-text-secondary\",children:[progress,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-amoled-dark rounded-full h-2.5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-amoled-accent h-2.5 rounded-full transition-all duration-500\",style:{width:`${progress}%`}})})]});};const renderWordCard=()=>{const currentWord=getCurrentWord();if(!currentWord){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-amoled-text-secondary\",children:\"\\u0421\\u043B\\u043E\\u0432\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-amoled-dark rounded-lg p-8 shadow-lg border border-amoled-light\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-bold text-amoled-text-primary mb-2\",children:currentWord.original}),currentWord.examples&&currentWord.examples.length>0&&/*#__PURE__*/_jsx(\"p\",{className:\"text-amoled-text-secondary italic\",children:currentWord.examples[0]})]}),showTranslation?/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 text-center animate-fade-in\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-semibold text-amoled-accent mb-2\",children:\"\\u041F\\u0435\\u0440\\u0435\\u0432\\u043E\\u0434:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl text-amoled-text-primary\",children:currentWord.translation})]}):/*#__PURE__*/_jsx(\"div\",{className:\"mb-8 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleShowTranslation,className:\"bg-amoled-gray hover:bg-amoled-light text-amoled-text-primary font-medium py-2 px-4 rounded-lg transition-colors\",children:\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u043F\\u0435\\u0440\\u0435\\u0432\\u043E\\u0434\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleDontKnowWord,className:\"bg-red-900 hover:bg-red-800 text-red-100 font-bold py-3 px-6 rounded-lg shadow-md transition-colors focus:outline-none focus:ring-2 focus:ring-red-700 focus:ring-opacity-50\",children:\"\\u041D\\u0435 \\u0437\\u043D\\u0430\\u044E\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleKnowWord,className:\"bg-green-900 hover:bg-green-800 text-green-100 font-bold py-3 px-6 rounded-lg shadow-md transition-colors focus:outline-none focus:ring-2 focus:ring-green-700 focus:ring-opacity-50\",children:\"\\u0417\\u043D\\u0430\\u044E\"})]})]});};const renderCompletionScreen=()=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-amoled-dark rounded-lg p-8 shadow-lg border border-amoled-light text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-24 w-24 mx-auto text-amoled-accent\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-amoled-text-primary mt-4\",children:\"\\u0423\\u0440\\u043E\\u043A \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043D!\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-amoled-text-secondary mt-2\",children:[\"\\u0412\\u044B \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u043F\\u0440\\u043E\\u0448\\u043B\\u0438 \\u0443\\u0440\\u043E\\u043A \\\"\",lesson===null||lesson===void 0?void 0:lesson.title,\"\\\".\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-amoled-gray p-4 rounded-lg inline-block\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-amoled-text-primary text-lg\",children:[\"\\u041F\\u0440\\u043E\\u0433\\u0440\\u0435\\u0441\\u0441: \",/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-amoled-accent\",children:[progress,\"%\"]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleRestartLesson,className:\"bg-amoled-gray hover:bg-amoled-light text-amoled-text-primary font-bold py-3 px-6 rounded-lg shadow-md transition-colors focus:outline-none focus:ring-2 focus:ring-amoled-light focus:ring-opacity-50\",children:\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u044C \\u0443\\u0440\\u043E\\u043A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFinishLesson,className:\"bg-amoled-accent hover:bg-amoled-accent-hover text-amoled-text-primary font-bold py-3 px-6 rounded-lg shadow-md transition-colors focus:outline-none focus:ring-2 focus:ring-amoled-accent focus:ring-opacity-50\",children:\"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u044C\"})]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8 min-h-screen bg-amoled-dark\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(Link,{to:`/lessons/${id}`,className:\"text-amoled-accent hover:text-amoled-accent-hover flex items-center transition-colors\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5 mr-1\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\",clipRule:\"evenodd\"})}),\"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043A \\u0443\\u0440\\u043E\\u043A\\u0443\"]})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 border-4 border-amoled-accent border-t-transparent rounded-full animate-spin\"})}):error?/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-900 border border-red-700 text-red-100 px-6 py-4 rounded-lg mb-6 shadow-md\",children:/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:error})}):lesson?/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6 text-amoled-text-primary text-center\",children:lesson.title}),renderProgressBar(),isCompleted?renderCompletionScreen():renderWordCard()]}):null]});};export default LessonLearn;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","lessonService","progressService","jsx","_jsx","jsxs","_jsxs","LessonLearn","id","navigate","lesson","setLesson","loading","setLoading","error","setError","currentWordIndex","setCurrentWordIndex","showTranslation","setShowTranslation","progress","setProgress","completedWords","setCompletedWords","isCompleted","setIsCompleted","fetchLesson","response","getLesson","success","data","progressResponse","getLessonProgress","completionPercentage","console","log","message","handleShowTranslation","handleKnowWord","Array","isArray","words","currentWord","wordId","_id","updateWordProgress","includes","newCompletedWords","newProgress","Math","round","length","handleDontKnowWord","handleRestartLesson","handleFinishLesson","isWordObject","word","getCurrentWord","renderProgressBar","className","children","style","width","renderWordCard","original","examples","translation","onClick","renderCompletionScreen","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","title","to","fillRule","clipRule"],"sources":["E:/grok/client/src/pages/LessonLearn.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport * as lessonService from '../services/lesson.service';\r\nimport * as progressService from '../services/progress.service';\r\nimport { ILesson, IWord } from '../types';\r\n\r\nconst LessonLearn: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const [lesson, setLesson] = useState<ILesson | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [currentWordIndex, setCurrentWordIndex] = useState(0);\r\n  const [showTranslation, setShowTranslation] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [completedWords, setCompletedWords] = useState<string[]>([]);\r\n  const [isCompleted, setIsCompleted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!id) return;\r\n    \r\n    const fetchLesson = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        \r\n        const response = await lessonService.getLesson(id);\r\n        \r\n        if (response.success && response.data) {\r\n          setLesson(response.data);\r\n          \r\n          // Fetch progress for this lesson\r\n          try {\r\n            const progressResponse = await progressService.getLessonProgress(id);\r\n            if (progressResponse.success && progressResponse.data) {\r\n              setProgress(progressResponse.data.completionPercentage);\r\n              setCompletedWords(progressResponse.data.completedWords || []);\r\n              \r\n              // If all words are completed, set isCompleted to true\r\n              if (progressResponse.data.completionPercentage === 100) {\r\n                setIsCompleted(true);\r\n              }\r\n            }\r\n          } catch (error) {\r\n            // If there's no progress yet, that's okay\r\n            console.log('No progress data available');\r\n          }\r\n        } else {\r\n          setError(response.message || 'Не удалось загрузить урок');\r\n        }\r\n      } catch (error: any) {\r\n        setError(error.message || 'Ошибка при загрузке урока');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchLesson();\r\n  }, [id]);\r\n\r\n  const handleShowTranslation = () => {\r\n    setShowTranslation(true);\r\n  };\r\n\r\n  const handleKnowWord = async () => {\r\n    if (!lesson || !id || !Array.isArray(lesson.words)) return;\r\n    \r\n    const currentWord = lesson.words[currentWordIndex];\r\n    const wordId = typeof currentWord === 'object' ? currentWord._id : currentWord;\r\n    \r\n    if (!wordId) return;\r\n    \r\n    try {\r\n      // Mark word as completed\r\n      await progressService.updateWordProgress(id, wordId);\r\n      \r\n      // Add to completed words\r\n      if (!completedWords.includes(wordId)) {\r\n        const newCompletedWords = [...completedWords, wordId];\r\n        setCompletedWords(newCompletedWords);\r\n        \r\n        // Calculate new progress\r\n        const newProgress = Math.round((newCompletedWords.length / lesson.words.length) * 100);\r\n        setProgress(newProgress);\r\n        \r\n        // If all words are completed, set isCompleted to true\r\n        if (newProgress === 100) {\r\n          setIsCompleted(true);\r\n        }\r\n      }\r\n      \r\n      // Move to next word or complete lesson\r\n      if (currentWordIndex < lesson.words.length - 1) {\r\n        setCurrentWordIndex(currentWordIndex + 1);\r\n        setShowTranslation(false);\r\n      } else {\r\n        setIsCompleted(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating word progress:', error);\r\n    }\r\n  };\r\n\r\n  const handleDontKnowWord = () => {\r\n    // Just move to the next word without marking it as known\r\n    if (!lesson || !Array.isArray(lesson.words)) return;\r\n    \r\n    if (currentWordIndex < lesson.words.length - 1) {\r\n      setCurrentWordIndex(currentWordIndex + 1);\r\n      setShowTranslation(false);\r\n    } else {\r\n      setIsCompleted(true);\r\n    }\r\n  };\r\n\r\n  const handleRestartLesson = () => {\r\n    setCurrentWordIndex(0);\r\n    setShowTranslation(false);\r\n    setIsCompleted(false);\r\n  };\r\n\r\n  const handleFinishLesson = () => {\r\n    navigate(`/lessons/${id}`);\r\n  };\r\n\r\n  // Helper function to check if a word is an IWord object\r\n  const isWordObject = (word: string | IWord): word is IWord => {\r\n    return typeof word === 'object' && word !== null && '_id' in word;\r\n  };\r\n\r\n  const getCurrentWord = (): IWord | null => {\r\n    if (!lesson || !Array.isArray(lesson.words) || lesson.words.length === 0) {\r\n      return null;\r\n    }\r\n    \r\n    const currentWord = lesson.words[currentWordIndex];\r\n    \r\n    if (isWordObject(currentWord)) {\r\n      return currentWord;\r\n    }\r\n    \r\n    return null;\r\n  };\r\n\r\n  const renderProgressBar = () => {\r\n    return (\r\n      <div className=\"mb-6\">\r\n        <div className=\"flex justify-between mb-1\">\r\n          <span className=\"text-sm font-medium text-amoled-text-secondary\">Прогресс</span>\r\n          <span className=\"text-sm font-medium text-amoled-text-secondary\">{progress}%</span>\r\n        </div>\r\n        <div className=\"w-full bg-amoled-dark rounded-full h-2.5\">\r\n          <div \r\n            className=\"bg-amoled-accent h-2.5 rounded-full transition-all duration-500\" \r\n            style={{ width: `${progress}%` }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderWordCard = () => {\r\n    const currentWord = getCurrentWord();\r\n    \r\n    if (!currentWord) {\r\n      return (\r\n        <div className=\"text-center py-8\">\r\n          <p className=\"text-amoled-text-secondary\">Слово не найдено</p>\r\n        </div>\r\n      );\r\n    }\r\n    \r\n    return (\r\n      <div className=\"bg-amoled-dark rounded-lg p-8 shadow-lg border border-amoled-light\">\r\n        <div className=\"mb-8 text-center\">\r\n          <h3 className=\"text-3xl font-bold text-amoled-text-primary mb-2\">{currentWord.original}</h3>\r\n          {currentWord.examples && currentWord.examples.length > 0 && (\r\n            <p className=\"text-amoled-text-secondary italic\">\r\n              {currentWord.examples[0]}\r\n            </p>\r\n          )}\r\n        </div>\r\n        \r\n        {showTranslation ? (\r\n          <div className=\"mb-8 text-center animate-fade-in\">\r\n            <h4 className=\"text-xl font-semibold text-amoled-accent mb-2\">Перевод:</h4>\r\n            <p className=\"text-2xl text-amoled-text-primary\">{currentWord.translation}</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"mb-8 text-center\">\r\n            <button\r\n              onClick={handleShowTranslation}\r\n              className=\"bg-amoled-gray hover:bg-amoled-light text-amoled-text-primary font-medium py-2 px-4 rounded-lg transition-colors\"\r\n            >\r\n              Показать перевод\r\n            </button>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"flex justify-between\">\r\n          <button\r\n            onClick={handleDontKnowWord}\r\n            className=\"bg-red-900 hover:bg-red-800 text-red-100 font-bold py-3 px-6 rounded-lg shadow-md transition-colors focus:outline-none focus:ring-2 focus:ring-red-700 focus:ring-opacity-50\"\r\n          >\r\n            Не знаю\r\n          </button>\r\n          <button\r\n            onClick={handleKnowWord}\r\n            className=\"bg-green-900 hover:bg-green-800 text-green-100 font-bold py-3 px-6 rounded-lg shadow-md transition-colors focus:outline-none focus:ring-2 focus:ring-green-700 focus:ring-opacity-50\"\r\n          >\r\n            Знаю\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderCompletionScreen = () => {\r\n    return (\r\n      <div className=\"bg-amoled-dark rounded-lg p-8 shadow-lg border border-amoled-light text-center\">\r\n        <div className=\"mb-8\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-24 w-24 mx-auto text-amoled-accent\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n          </svg>\r\n          <h2 className=\"text-3xl font-bold text-amoled-text-primary mt-4\">Урок завершен!</h2>\r\n          <p className=\"text-amoled-text-secondary mt-2\">\r\n            Вы успешно прошли урок \"{lesson?.title}\".\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"mb-8\">\r\n          <div className=\"bg-amoled-gray p-4 rounded-lg inline-block\">\r\n            <p className=\"text-amoled-text-primary text-lg\">\r\n              Прогресс: <span className=\"font-bold text-amoled-accent\">{progress}%</span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex justify-center space-x-4\">\r\n          <button\r\n            onClick={handleRestartLesson}\r\n            className=\"bg-amoled-gray hover:bg-amoled-light text-amoled-text-primary font-bold py-3 px-6 rounded-lg shadow-md transition-colors focus:outline-none focus:ring-2 focus:ring-amoled-light focus:ring-opacity-50\"\r\n          >\r\n            Повторить урок\r\n          </button>\r\n          <button\r\n            onClick={handleFinishLesson}\r\n            className=\"bg-amoled-accent hover:bg-amoled-accent-hover text-amoled-text-primary font-bold py-3 px-6 rounded-lg shadow-md transition-colors focus:outline-none focus:ring-2 focus:ring-amoled-accent focus:ring-opacity-50\"\r\n          >\r\n            Завершить\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8 min-h-screen bg-amoled-dark\">\r\n      <div className=\"mb-6\">\r\n        <Link to={`/lessons/${id}`} className=\"text-amoled-accent hover:text-amoled-accent-hover flex items-center transition-colors\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-1\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n            <path fillRule=\"evenodd\" d=\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n          Вернуться к уроку\r\n        </Link>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"flex justify-center py-12\">\r\n          <div className=\"w-16 h-16 border-4 border-amoled-accent border-t-transparent rounded-full animate-spin\"></div>\r\n        </div>\r\n      ) : error ? (\r\n        <div className=\"bg-red-900 border border-red-700 text-red-100 px-6 py-4 rounded-lg mb-6 shadow-md\">\r\n          <p className=\"font-medium\">{error}</p>\r\n        </div>\r\n      ) : lesson ? (\r\n        <div className=\"max-w-2xl mx-auto\">\r\n          <h1 className=\"text-3xl font-bold mb-6 text-amoled-text-primary text-center\">\r\n            {lesson.title}\r\n          </h1>\r\n          \r\n          {renderProgressBar()}\r\n          \r\n          {isCompleted ? renderCompletionScreen() : renderWordCard()}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LessonLearn; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}